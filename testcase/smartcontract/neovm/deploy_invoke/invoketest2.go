package deploy_invoke

import (
	"github.com/ontio/ontology-test/testframework"
	"github.com/ontio/ontology-go-sdk/utils"
	"time"
	"fmt"
)


func TestInvokeContract2(ctx *testframework.TestFrameworkContext) bool {
	var testcode = "0115c56b6c766b00527ac46c766b51527ac4616c766b00c304696e6974876c766b52527ac46c766b52c36411006165d6026c766b53527ac46290026c766b00c30a6d696e74546f6b656e73876c766b54527ac46c766b54c3641100616538056c766b53527ac46262026c766b00c30b746f74616c537570706c79876c766b55527ac46c766b55c36411006165ac096c766b53527ac46233026c766b00c3046e616d65876c766b56527ac46c766b56c364110061651e026c766b53527ac4620b026c766b00c30673796d626f6c876c766b57527ac46c766b57c3641100616505026c766b53527ac462e1016c766b00c306656e6449636f876c766b58527ac46c766b58c3641100616570076c766b53527ac462b7016c766b00c30669636f4e656f876c766b59527ac46c766b59c36411006165190c6c766b53527ac4628d016c766b00c30869636f546f6b656e876c766b5a527ac46c766b5ac36411006165490c6c766b53527ac46261016c766b00c30a746f74616c546f6b656e876c766b5b527ac46c766b5bc364110061656a016c766b53527ac46233016c766b00c3087472616e73666572876c766b5c527ac46c766b5cc3647100616c766b51c3c0539c009c6c766b60527ac46c766b60c3640e00006c766b53527ac462f0006c766b51c300c36c766b5d527ac46c766b51c351c36c766b5e527ac46c766b51c352c36c766b5f527ac46c766b5dc36c766b5ec36c766b5fc36152726575086c766b53527ac462a7006c766b00c30962616c616e63654f66876c766b0111527ac46c766b0111c3644d00616c766b51c3c0519c009c6c766b0113527ac46c766b0113c3640e00006c766b53527ac4625f006c766b51c300c36c766b0112527ac46c766b0112c36165730a6c766b53527ac4623c006c766b00c308646563696d616c73876c766b0114527ac46c766b0114c364110061653d006c766b53527ac4620e00006c766b53527ac46203006c766b53c3616c756600c56b0943505820546f6b656e616c756600c56b03435058616c756600c56b58616c756600c56b0700001a93fa350e616c756653c56b6161681953797374656d2e53746f726167652e476574436f6e746578740b746f74616c537570706c79617c681253797374656d2e53746f726167652e4765746c766b00527ac46c766b00c3c000a06c766b51527ac46c766b51c3640e00006c766b52527ac4621f0261681953797374656d2e53746f726167652e476574436f6e746578746114ce4ad57e32e5ea5ad2fbe37c2e2ea5e49c06e7db070000e6f4573466615272681253797374656d2e53746f726167652e5075746161006114ce4ad57e32e5ea5ad2fbe37c2e2ea5e49c06e7db070000e6f4573466615272087472616e7366657254c1681553797374656d2e52756e74696d652e4e6f746966796161681953797374656d2e53746f726167652e476574436f6e746578746114dcd19352ed96b58f4d68cf5feed961cb8eb4598a0700c06cc92ade0f615272681253797374656d2e53746f726167652e5075746161006114dcd19352ed96b58f4d68cf5feed961cb8eb4598a0700c06cc92ade0f615272087472616e7366657254c1681553797374656d2e52756e74696d652e4e6f746966796161681953797374656d2e53746f726167652e476574436f6e7465787461143886f0dcc305d808da0185d9981e5136dbc4f3dc0700a2333d4f3b6c615272681253797374656d2e53746f726167652e50757461610061143886f0dcc305d808da0185d9981e5136dbc4f3dc0700a2333d4f3b6c615272087472616e7366657254c1681553797374656d2e52756e74696d652e4e6f746966796161681953797374656d2e53746f726167652e476574436f6e746578740b746f74616c537570706c7908006286fbd14de200615272681253797374656d2e53746f726167652e50757461516c766b52527ac46203006c766b52c3616c75665ec56b616165850b6c766b00527ac46c766b00c3c0009c6c766b59527ac46c766b59c3640f0061006c766b5a527ac462ab0261681b53797374656d2e426c6f636b636861696e2e47657448656967687461681b53797374656d2e426c6f636b636861696e2e47657448656164657261681a53797374656d2e4865616465722e47657454696d657374616d706c766b51527ac46c766b51c30490e26e5a946c766b52527ac46165650c6c766b53527ac46c766b00c36c766b53c36c766b52c3615272658d0f6c766b54527ac46c766b54c3009c6c766b5b527ac46c766b5bc3640f0061006c766b5a527ac462f0016c766b52c3616588076c766b55527ac46c766b55c3009c6c766b5c527ac46c766b5cc3643d0061616c766b00c36c766b54c3617c06726566756e6453c1681553797374656d2e52756e74696d652e4e6f7469667961006c766b5a527ac46290016c766b00c36c766b54c36c766b55c36152726573076c766b56527ac46c766b56c3009c6c766b5d527ac46c766b5dc3640f0061006c766b5a527ac462520161681953797374656d2e53746f726167652e476574436f6e746578746c766b00c3617c681253797374656d2e53746f726167652e4765746c766b57527ac461681953797374656d2e53746f726167652e476574436f6e746578746c766b00c36c766b56c36c766b57c393615272681253797374656d2e53746f726167652e5075746161681953797374656d2e53746f726167652e476574436f6e746578740b746f74616c537570706c79617c681253797374656d2e53746f726167652e4765746c766b58527ac461681953797374656d2e53746f726167652e476574436f6e746578740b746f74616c537570706c796c766b56c36c766b58c393615272681253797374656d2e53746f726167652e5075746161006c766b00c36c766b56c3615272087472616e7366657254c1681553797374656d2e52756e74696d652e4e6f7469667961516c766b5a527ac46203006c766b5ac3616c756655c56b616114e63bc361f4d1a5a9eeb58d72b95b99c7a5f4d7d461681b53797374656d2e52756e74696d652e436865636b5769746e657373009c6c766b52527ac46c766b52c3640e00006c766b53527ac462660161681953797374656d2e53746f726167652e476574436f6e746578740b746f74616c537570706c79617c681253797374656d2e53746f726167652e4765746c766b00527ac4080062a08ecc83f0006c766b00c3946c766b51527ac46c766b51c300a16c766b54527ac46c766b54c3640f0061006c766b53527ac462e90061681953797374656d2e53746f726167652e476574436f6e746578740b746f74616c537570706c79080062a08ecc83f000615272681253797374656d2e53746f726167652e5075746161681953797374656d2e53746f726167652e476574436f6e746578746114e63bc361f4d1a5a9eeb58d72b95b99c7a5f4d7d46c766b51c3615272681253797374656d2e53746f726167652e5075746161006114e63bc361f4d1a5a9eeb58d72b95b99c7a5f4d7d46c766b51c3615272087472616e7366657254c1681553797374656d2e52756e74696d652e4e6f7469667961516c766b53527ac46203006c766b53c3616c756651c56b6161681953797374656d2e53746f726167652e476574436f6e746578740b746f74616c537570706c79617c681253797374656d2e53746f726167652e4765746c766b00527ac46203006c766b00c3616c75665bc56b6c766b00527ac46c766b51527ac46c766b52527ac4616c766b52c300a16c766b55527ac46c766b55c3640e00006c766b56527ac46229026c766b00c361681b53797374656d2e52756e74696d652e436865636b5769746e657373009c6c766b57527ac46c766b57c3640e00006c766b56527ac462ea016c766b00c36c766b51c39c6c766b58527ac46c766b58c3640e00516c766b56527ac462c50161681953797374656d2e53746f726167652e476574436f6e746578746c766b00c3617c681253797374656d2e53746f726167652e4765746c766b53527ac46c766b53c36c766b52c39f6c766b59527ac46c766b59c3640e00006c766b56527ac46262016c766b53c36c766b52c39c6c766b5a527ac46c766b5ac364410061681953797374656d2e53746f726167652e476574436f6e746578746c766b00c3617c681553797374656d2e53746f726167652e44656c6574656162470061681953797374656d2e53746f726167652e476574436f6e746578746c766b00c36c766b53c36c766b52c394615272681253797374656d2e53746f726167652e5075746161681953797374656d2e53746f726167652e476574436f6e746578746c766b51c3617c681253797374656d2e53746f726167652e4765746c766b54527ac461681953797374656d2e53746f726167652e476574436f6e746578746c766b51c36c766b54c36c766b52c393615272681253797374656d2e53746f726167652e50757461616c766b00c36c766b51c36c766b52c3615272087472616e7366657254c1681553797374656d2e52756e74696d652e4e6f7469667961516c766b56527ac46203006c766b56c3616c756652c56b6c766b00527ac46161681953797374656d2e53746f726167652e476574436f6e746578746c766b00c3617c681253797374656d2e53746f726167652e4765746c766b51527ac46203006c766b51c3616c756652c56b6161681953797374656d2e53746f726167652e476574436f6e746578740669636f4e656f617c681253797374656d2e53746f726167652e4765746c766b00527ac46c766b00c36c766b51527ac46203006c766b51c3616c756652c56b6161681953797374656d2e53746f726167652e476574436f6e746578740669636f4e656f617c681253797374656d2e53746f726167652e4765746c766b00527ac46c766b00c30500e8764817950400e1f505966c766b51527ac46203006c766b51c3616c756653c56b6c766b00527ac4616c766b00c3009f630f006c766b00c302302aa0620400516c766b51527ac46c766b51c3640f0061006c766b52527ac4621400610500e87648176c766b52527ac46203006c766b52c3616c75665ec56b6c766b00527ac46c766b51527ac46c766b52527ac4616c766b51c30400e1f505966c766b52c3956c766b53527ac461681953797374656d2e53746f726167652e476574436f6e746578740b746f74616c537570706c79617c681253797374656d2e53746f726167652e4765746c766b54527ac461681953797374656d2e53746f726167652e476574436f6e746578740669636f4e656f617c681253797374656d2e53746f726167652e4765746c766b55527ac4080062a08ecc83f0006c766b54c3946c766b56527ac46c766b56c300a16c766b57527ac46c766b57c3643d0061616c766b00c36c766b51c3617c06726566756e6453c1681553797374656d2e52756e74696d652e4e6f7469667961006c766b58527ac46296016c766b56c36c766b53c39f6c766b59527ac46c766b59c3641b01616c766b56c36c766b5a527ac46c766b5ac36c766b52c3966c766b5b527ac46c766b51c36c766b5bc30400e1f50595946c766b5c527ac4616c766b00c36c766b5cc3617c06726566756e6453c1681553797374656d2e52756e74696d652e4e6f746966796161681953797374656d2e53746f726167652e476574436f6e746578740b746f74616c537570706c79617c681253797374656d2e53746f726167652e4765746c766b5d527ac461681953797374656d2e53746f726167652e476574436f6e746578740b746f74616c537570706c796c766b5dc36c766b5ac393615272681253797374656d2e53746f726167652e507574616c766b5bc30400e1f505956a51527ac46c766b5bc36c766b52c3956c766b53527ac4616c766b55c36c766b51c3936c766b55527ac461681953797374656d2e53746f726167652e476574436f6e746578740669636f4e656f6c766b55c3615272681253797374656d2e53746f726167652e507574616c766b53c36c766b58527ac46203006c766b58c3616c756657c56b6161682953797374656d2e457865637574696f6e456e67696e652e476574536372697074436f6e7461696e65726c766b00527ac46c766b00c361681d4e656f2e5472616e73616374696f6e2e4765745265666572656e6365736c766b51527ac4616c766b51c36c766b52527ac4006c766b53527ac4629e006c766b52c36c766b53c3c36c766b54527ac4616c766b54c36168154e656f2e4f75747075742e4765744173736574496461209b7cffdaa674beae0f930ebe6085af9093e5fe56b34a5c220ccdcf6efc336fc59c6c766b55527ac46c766b55c3642d006c766b54c36168184e656f2e4f75747075742e476574536372697074486173686c766b56527ac4622c00616c766b53c351936c766b53527ac46c766b53c36c766b52c3c09f6359ff006c766b56527ac46203006c766b56c3616c756651c56b6161682d53797374656d2e457865637574696f6e456e67696e652e476574457865637574696e67536372697074486173686c766b00527ac46203006c766b00c3616c756658c56b6161682953797374656d2e457865637574696f6e456e67696e652e476574536372697074436f6e7461696e65726c766b00527ac46c766b00c361681a4e656f2e5472616e73616374696f6e2e4765744f7574707574736c766b51527ac4006c766b52527ac4616c766b51c36c766b53527ac4006c766b54527ac462ce006c766b53c36c766b54c3c36c766b55527ac4616c766b55c36168184e656f2e4f75747075742e47657453637269707448617368616505ff907c907c9e6346006c766b55c36168154e656f2e4f75747075742e4765744173736574496461209b7cffdaa674beae0f930ebe6085af9093e5fe56b34a5c220ccdcf6efc336fc59c620400006c766b56527ac46c766b56c3642d00616c766b52c36c766b55c36168134e656f2e4f75747075742e47657456616c7565936c766b52527ac461616c766b54c351936c766b54527ac46c766b54c36c766b53c3c09f6329ff6c766b52c36c766b57527ac46203006c766b57c3616c756659c56b6c766b00527ac46c766b51527ac46c766b52527ac46c766b53527ac46161681953797374656d2e53746f726167652e476574436f6e746578746c766b00c36c766b53c37e617c681253797374656d2e53746f726167652e4765746c766b54527ac46c766b52c36c766b54c3946c766b55527ac46c766b55c300a0009c6c766b56527ac46c766b56c3643d0061616c766b00c36c766b51c3617c06726566756e6453c1681553797374656d2e52756e74696d652e4e6f7469667961006c766b57527ac46204016c766b55c36c766b51c39f6c766b58527ac46c766b58c364910061616c766b00c36c766b51c36c766b55c394617c06726566756e6453c1681553797374656d2e52756e74696d652e4e6f746966796161681953797374656d2e53746f726167652e476574436f6e746578746c766b00c36c766b53c37e6c766b55c36c766b54c393615272681253797374656d2e53746f726167652e507574616c766b55c36c766b57527ac4625c0061681953797374656d2e53746f726167652e476574436f6e746578746c766b00c36c766b53c37e6c766b51c36c766b54c393615272681253797374656d2e53746f726167652e507574616c766b51c36c766b57527ac46203006c766b57c3616c756658c56b6c766b00527ac46c766b51527ac46c766b52527ac4616c766b52c3009f6c766b53527ac46c766b53c3643d0061616c766b00c36c766b51c3617c06726566756e6453c1681553797374656d2e52756e74696d652e4e6f7469667961006c766b54527ac46234016c766b52c302100ea0009c6c766b55527ac46c766b55c3643b00616c766b00c36c766b51c3040084d717056361705f316153795179557275517275527952795472755272756580fd6c766b54527ac462e2006c766b52c302201ca0009c6c766b56527ac46c766b56c3643b00616c766b00c36c766b51c30400ca9a3b056361705f32615379517955727551727552795279547275527275652efd6c766b54527ac46290006c766b52c302302aa0009c6c766b57527ac46c766b57c3643c00616c766b00c36c766b51c305005ed0b200056361705f3361537951795572755172755279527954727552727565dbfc6c766b54527ac4623d0061616c766b00c36c766b51c3617c06726566756e6453c1681553797374656d2e52756e74696d652e4e6f7469667961006c766b54527ac46203006c766b54c3616c7566"
	codeAddress, _ := utils.GetContractAddress(testcode)
	fmt.Println(codeAddress)
	signer, err := ctx.GetDefaultAccount()
	if err != nil {
		ctx.LogError("TestDomainSmartContract GetDefaultAccount error:%s", err)
		return false
	}

	tx1, err := ctx.Ont.Rpc.DeploySmartContract(ctx.GetGasPrice(), ctx.GetGasLimit(),
		signer,
		true,
		testcode,
		"TestDomainSmartContract",
		"1.0",
		"",
		"",
		"",
	)

	if err != nil {
		ctx.LogError("TestDomainSmartContract DeploySmartContract error: %s", err)
	}

	fmt.Println(tx1.ToHexString())

	//WaitForGenerateBlock
	_, err = ctx.Ont.Rpc.WaitForGenerateBlock(30*time.Second, 1)
	if err != nil {
		ctx.LogError("TestDomainSmartContract WaitForGenerateBlock error: %s", err)
		return false
	}

	//t,err:=common.Uint256FromHexString("973bb206682debcf06b370043c504a10723b435881340536bcbf538c11ae9aed")
	//if err != nil {
	//	ctx.LogError("TestDomainSmartContract Uint256FromHexString error:%s", err)
	//
	//	return false
	//}

	//addr ,_:= common.AddressFromBase58("Ad4pjz2bqep4RhQrUAzMuZJkBC3qJ1tZuT")

	/*tx, err := ctx.Ont.Rpc.NewNeoVMSInvokeTransaction(ctx.GetGasPrice(), ctx.GetGasLimit(),codeAddress, []interface{}{"testTobytes", []interface{}{[]byte("abcdefg"),[]byte("abcdefg")}})
	if err != nil {
		ctx.LogError("TestDomainSmartContract NewNeoVMSInvokeTransaction error:%s", err)

		return false
	}
	err = ctx.Ont.Rpc.SignToTransaction(tx, signer)
	if err != nil {
		ctx.LogError("TestDomainSmartContract SignToTransaction error:%s", err)

		return false
	}


	obj,err:=ctx.Ont.Rpc.PrepareInvokeContract(tx)
	if err != nil {
		ctx.LogError("TestDomainSmartContract PrepareInvokeContract error:%s", err)

		return false
	}
	fmt.Println(obj)
	bs,_:=common.HexToBytes(obj.Result.(string))
	fmt.Printf("%v\n",bs)
	fmt.Printf("%s\n",bs)
*/

	return true
}